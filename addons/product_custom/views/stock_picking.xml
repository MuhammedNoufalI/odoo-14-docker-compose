<odoo>
    <data>
        <!-- Inherit Form View to Modify it -->
        <record id="inherit_view_picking_form" model="ir.ui.view">
            <field name="name">inherit_view_picking_form</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='move_ids_without_package']/tree/field[@name='quantity_done']"
                       position="attributes">
                    <attribute name="attrs">
                        {'readonly': [('state', 'in', ['cancel','done'])]}
                    </attribute>
                </xpath>
            </field>
        </record>
        <record model="ir.actions.server" id="action_picking_update_effective_date">
            <field name="name">Update effective date</field>
            <field name="model_id" ref="stock.model_stock_picking"/>
            <field name="binding_model_id" ref="stock.model_stock_picking"/>
            <field name="state">code</field>
<!--            <field name="binding_view_types">form</field>-->
            <field name="code">
                if records:
                    for record in records:
                        action = record.action_update_effective_date()
            </field>
        </record>
    </data>
</odoo>